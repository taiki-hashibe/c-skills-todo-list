<!doctype html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vite App</title>
  <meta name="description" content="シンプルなToDo管理アプリ。日々の作業を見える化。" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon">
</head>

<body>
  <div class="flex w-full h-screen items-center justify-center">
    <!-- TODOリスト -->
    <div x-data="todoApp()" class="w-96">
      <!-- インプットグループ -->
      <div
        class="flex item-center w-full border border-slate-200 bg-white rounded-md overflow-hidden focus-within:shadow-md">
        <input x-model="newTodo" type="text" placeholder="やることを入力" class="p-2 grow focus:outline-none">
        <button @click="addTodo" class="bg-sky-400 px-4 py-2 text-white cursor-pointer">
          追加
        </button>
      </div>

      <!-- リスト -->
      <ul class="mt-4">
        <template x-for="todo in todoList">
          <li class="flex justify-between items-center rounded-md shadow-md px-4 py-1 bg-amber-50 mb-2">
            <span x-text="todo.text"></span>
            <button @click="removeTodo(todo.id)" class="p-2 text-red-500 hover:bg-red-100 rounded-full cursor-pointer">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
              </svg>
            </button>
          </li>
        </template>
      </ul>
    </div>
  </div>

  <script>
    function todoApp() {
      return {
        newTodo: "",
        todoList: [],
        init() {
          const saved = localStorage.getItem("todoList");
          this.todoList = saved ? JSON.parse(saved) : [];
        },
        save() {
          localStorage.setItem("todoList", JSON.stringify(this.todoList));
        },
        addTodo() {
          // trimは前後の空白を削除するJavascriptのメソッド
          // 空白のみの時には追加しないためにtrimを使用
          if (this.newTodo.trim() !== "") {
            this.todoList.push({
              id: Date.now(),
              text: this.newTodo.trim()
            });
            this.newTodo = "";
            this.save();
          }
        },
        removeTodo(id) {
          this.todoList = this.todoList.filter(todo => todo.id !== id);
          this.save();
        }
      }
    }
  </script>

  <!-- <div class="flex flex-col items-center justify-center h-screen">
      <ul x-data="{ todoList: [
        'Todo 1',
        'Todo 2',
        'Todo 3'
      ] }" class="flex flex-col gap-3 w-96">
          <template x-for="todo in todoList">
              <li x-text="todo" class="bg-amber-50 px-4 py-3 shadow-md rounded-md">
              </li>
          </template>
      </ul>
    </div> -->
  <script type="module" src="/src/main.js"></script>
</body>

</html>